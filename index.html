<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
每
<select id="select">
    <option value="1h">小时</option>
    <option value="3h">三小时</option>
    <option value="6h">六小时</option>
    <option value="12h">十二小时</option>
    <option value="1d">天</option>
    <option value="2d">两天</option>
    <option value="3d" selected>三天</option>
    <option value="4d">四天</option>
    <option value="5d">五天</option>
    <option value="6d">六天</option>
    <option value="7d">七天</option>
    <option value="15d">十五天</option>
    <option value="1m">月</option>
    <option value="2m">两个月</option>
</select>执行一次
<br>
<label for="plain"></label><input type="text" id="plain">
</body>
<script type="module">
    import {cron, parse} from "./index.js"

    let select = document.querySelector('#select')
    let plain = document.querySelector('#plain')
    const selectChange = () => {
        let r = select.value.match(/(\d+)(\w)/)
        if (r === null) {
            return
        }
        let value = ''
        if (r[2] === 'h') {
            value = cron(...[0, parseInt(r[1]), 0, 0, 0])
        } else if (r[2] === 'd') {
            value = cron(...[0, 0, parseInt(r[1]), 0, 0])
        } else if (r[2] === 'm') {
            value = cron(...[0, 0, 0, parseInt(r[1]), 0])
        } else {
            return
        }
        plain.value = value
    }
    const plainChange = () => {
        let p = parse(plain.value.trim())
        let v = ''
        if (p[1] > 0) {
            v = p[1] + 'h'
        }
        if (p[2] > 0) {
            v = p[2] + 'd'
        }
        if (p[3] > 0) {
            v = p[3] + 'm'
        }
        let q = select.querySelector('option[value="' + v + '"]')
        if (q != null) {
            q.setAttribute('selected', 'selected')
        }
    }
    select.onchange = () => {
        selectChange()
    };
    plain.onchange = () => {
        plainChange()
    };
    selectChange()
</script>
</html>